# Bishop Prototype

**Bishop Prototype** ‚Äî REST-—Å–µ—Ä–≤–∏—Å-—ç–º—É–ª—è—Ç–æ—Ä —Å–∏–Ω—Ç–µ—Ç–∏–∫–∞, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å—Ç–∞—Ä—Ç–µ—Ä–∞ `synthetic-human-core-starter`, —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ –∑–∞–¥–∞–Ω–∏—é Weyland-Yutani.
–°–ª—É–∂–∏—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –∏ –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

* –ü—Ä–∏–µ–º –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
* –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
* –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π —Å–∏–Ω—Ç–µ—Ç–∏–∫–∞
* –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

üîπ **–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥:**

* POST `/commands` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ —Å–∏—Å—Ç–µ–º—É

  ```bash
  POST /command?authorType=SCIENTIST_WEYLAND&commandType=CHECK_ENERGY
  ```

* –ö–æ–º–∞–Ω–¥—ã —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º:

  * `CRITICAL` ‚Äî –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
  * `COMMON` ‚Äî –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å

üîπ **–û—á–µ—Ä–µ–¥—å:**

* –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ
* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞
* –ü—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ `503`

üîπ **–ê—É–¥–∏—Ç:**

* –ú–µ—Ç–æ–¥—ã, –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ `@WeylandWatchingYou`, –ª–æ–≥–∏—Ä—É—é—Ç:

  * –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞
  * –ê—Ä–≥—É–º–µ–Ω—Ç—ã
  * –†–µ–∑—É–ª—å—Ç–∞—Ç
  * Timestamp
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–≤–∞ —Ä–µ–∂–∏–º–∞:

  * –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  * –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Kafka (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

üîπ **–ú–µ—Ç—Ä–∏–∫–∏ (—á–µ—Ä–µ–∑ Spring Actuator):**

* `GET /actuator/metrics/bishop.command.queue.size` ‚Äî —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏
* `GET /actuator/metrics/bishop.commands.per.author` ‚Äî —á–∏—Å–ª–æ –∫–æ–º–∞–Ω–¥ –Ω–∞ –∞–≤—Ç–æ—Ä–∞

üîπ **–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫:**

```json
{
  "status": "VALIDATION_ERROR",
  "message": "Field 'time' must match ISO 8601",
  "details": {
    "time": "–¥–æ–ª–∂–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å \"^\\d{4}-...\""
  }
}
```

---

## –ó–∞–ø—É—Å–∫

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `starter` —Å–æ–±—Ä–∞–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º Maven-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:

   ```bash
   cd ../bishop-starter
   mvn clean install
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø:

   ```bash
   cd ../bishop-prototype
   mvn spring-boot:run
   ```

3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É


---

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

* Java 17
* Spring Boot 3
* Maven
* Micrometer / Actuator
* AOP

---


## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

`application.yml`:

```properties
audit.mode=CONSOLE # –∏–ª–∏ KAFKA
kafka.topic=audit-log
kafka.bootstrap-servers=localhost:9092
```
